# Variables
@baseUrl = http://localhost:3333

# Health check
# @name healthCheck
GET {{baseUrl}}/health

###

# Register user
# @name registerUser
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "name": "Test User",
  "email": "test@example.com",
  "password": "password123"
}

###

# Login user
# @name loginUser
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123"
}

###

# Get rooms WITHOUT token (should fail)
# @name getRoomsWithoutToken
GET {{baseUrl}}/rooms

###

# Get rooms WITH token (should work)
# @name getRoomsWithToken
GET {{baseUrl}}/rooms
Authorization: Bearer {{loginUser.response.body.$.token}}

###

# Create room WITH token
# @name createRoom
POST {{baseUrl}}/rooms
Content-Type: application/json
Authorization: Bearer {{loginUser.response.body.$.token}}

{
  "name": "Sala de teste w/ Login",
  "description": "Essa Ã© uma sala de teste"
}

###

@roomId = {{createRoom.response.body.$.roomId}}

###

# Get room questions
# @name getRoomQuestions
GET {{baseUrl}}/rooms/{{roomId}}/questions
Authorization: Bearer {{loginUser.response.body.$.token}}

###

# Create question
# @name createQuestion
POST {{baseUrl}}/rooms/{{roomId}}/questions
Content-Type: application/json
Authorization: Bearer {{loginUser.response.body.$.token}}

{
  "question": "Is this a test with login?"
}